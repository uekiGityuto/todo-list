---
name: reviewer
description: コード変更のレビューを実行する。実装後のセルフレビューやコミット前の品質チェックに使用。変更があった場合にプロアクティブに使う。
tools: Read, Grep, Glob, Bash
model: haiku
---

コード変更のレビューを実行し、結果を報告する。

## 手順

### 1. 変更ファイルの特定

`git diff --name-only main...HEAD` でmainブランチからの変更ファイルを取得する。
未コミットの変更がある場合は `git diff --name-only` も加える。
対象は `src/**/*.{ts,tsx}` のみ。docs, config 等はスキップ。

### 2. build / lint チェック

以下を実行し、エラー・警告があれば報告する。

```bash
pnpm build
pnpm lint
```

### 3. React / Next.js ベストプラクティスチェック

変更ファイルを読み、以下の観点でレビューする:

- 不要な "use client": サーバーコンポーネントで済むのにクライアントにしていないか
- useEffect の乱用: 派生状態の計算やイベントハンドラで代替できないか
- 巨大コンポーネント: 1ファイルが肥大化していないか（目安200行超）
- key の不適切な使用: 配列の index を key にしていないか
- 型安全性: any の使用、型アサーションの乱用がないか

### 4. 結果報告

以下のフォーマットで報告する:

```
## レビュー結果

### build / lint
- ✅ エラーなし / ❌ エラーあり（詳細）

### ベストプラクティス
- ファイルごとに指摘事項をリスト

### 総合判定
- ✅ 問題なし / ⚠️ 要対応（n件）
```
