# vive-codingのKnowledge

## 前提

今回、自分では実装せず、Claude Codeに実装してもらったので、そのときのポイントやコツをまとめる。

## 要件定義

1. Notionのプロダクトデザインのテンプレートを使って、超簡易にまとめた。ターゲットや現状の課題、解決策の方向性などをざっくりと。
   https://www.notion.so/30d579901b7d801fb198dc2e41490db1?source=copy_link

2. Desktop版のClaudeにそれを読ませて、要件定義書を作りたいので、協力してとお願いした。Claudeからの質問に答える形で、要件をブラッシュアップ。最終的にMarkdown形式でドキュメント化してもらった。技術スタックもこの段階で決めた。
   https://claude.ai/share/d8321fca-0894-4cd5-8a18-e08531d262a8

作成してもらったドキュメントがこれ（作業しながら修正したので、最初の状態からは少し変わっている）
[task-management-plan.md](docs/task-management-plan.md)

## セットアップ

基本的にはこのドキュメントの内容通りにセットアップ。
[SETUP.md](/docs/SETUP.md)

試しにdevcontainerを立ち上げたけど、pencil.devが使えなかったので、結局実装はローカル環境（ホスト環境）でやったので、意味なかった。
skillsのui-ux-pro-maxとvercel-react-best-practicesを入れてみた。

## デザイン

pencil.devでClaude Codeにデザインさせる体験が凄く良かった。

[pencil.md](/docs/knowledge/pencil.md)参照

参考となるデザインがあれば、デザイン作成の前に、ui-ux-pro-maxでスタイルガイドを作ってもらうと良さそう。
また、デザイン工程が面倒であれば、pencil.devを使わずに、ui-ux-pro-maxだけで直接コーディングまでしてもらっても良いかもしれない。

## コーディング

1. 共通定義（スタイル定義や共通コンポーネント）を実装
   - ショーケースページを作って目視確認すると良い
   - lint・ビルド・best practicesチェックもこの段階で
2. ドメインモデルを洗い出して、型定義を実装
   - ページ仕様書より先にやると、データ構造が明確な状態で仕様を書ける
3. ディレクトリ構成の設計
   - モデル定義方法やデータアクセスの方針に依存するため、型定義の後に
4. デザインからページごとの実装仕様書を作成
   - コンポーネント構成、状態、インタラクション、データ要件を整理
   - 仕様書はレビューした方が良い。間違っていることがあった。
5. ページごとに実装

## スタイル・UI設計のポイント

### カラールールの事前定義

- 色が散らばらないように、基本的には決まった色だけ使う
- hover時の色を決める。hover色のルールも決める（例: 親の背景色に応じてhover色を変える）
- UIライブラリを使う場合は、UIライブラリのデフォルトの色を事前に定義した色で上書きする

### インタラクション

- クリック可能な要素にはcursor: pointerを設定する（LLMは言わないとやらない）

### 作業ファイルの管理

- vibe-codingしていると、スクリーンショットやログなどの作業ファイルがプロジェクトルートに散らかりがち
- 配置場所を事前に決めて、`.gitignore` に追加しておくこと
  - 例: Playwrightのスクショ → `.playwright-mcp/`、TAKTの作業ログ → `.takt/`
- CLAUDE.md やメモリに記録しておくと、セッションをまたいでも守られる

### コンポーネント化

- UIライブラリを使う場合は、デザインの統一感をもたせるために、ネイティブ要素よりUIライブラリにあるデザインを使う
- 仮にネイティブ要素そのまま、UIライブラリそのままでも、後で変えたくなるかもしれないので、ラップしてコンポーネント化しておくと保守しやすい
- 極力atomレベルのデザインはコンポーネントにする（dropdown, button, calendar, inputなど）
- 一箇所しか使わなくても、機能追加で使うかもしれない
- デザインの統一感をもたせるため（特にLLMだとセッションごとにやり方が変わってしまうので）
