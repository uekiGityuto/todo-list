# タイマー画面 仕様

## パス

`/timer`（もしくはモーダル/オーバーレイ）

## 概要

カウントダウンタイマー。作業開始で遷移し、完了/継続/中断を選択して終了する。

## レイアウト

### モバイル

```
[taskLabel]           ← 作業中タスク名（中央揃え）
[Badge]               ← カテゴリバッジ
[timerCircle]         ← SVGプログレスリング + 残り時間テキスト
[actionButtons]       ← 「中断する」「完了する」
[TabBar]              ← activeTab="home"
```

### PC

画面内に簡易タイマー表示（PiPは将来対応）。レイアウトはモバイルと同構造。

## 使用コンポーネント

| コンポーネント | 用途 |
|---|---|
| `Badge` | カテゴリバッジ |
| `Button` | 「中断する」(secondary) / 「完了する」(primary) |
| `Dialog` | タイマー終了ダイアログ |
| `TabBar` / `Sidebar` | ナビゲーション |

## タイマーリング（専用実装）

- SVG `circle` で実装（`stroke-dasharray` / `stroke-dashoffset`）
- トラック: `border` 色、8px
- プログレス: `primary` 色、8px
- 中央テキスト: 残り時間（30px bold）+ 「残り」ラベル
- サイズ: 220x220

## 状態

### タイマー稼働中

- プログレスリングがカウントダウンに応じて減少
- 「中断する」「完了する」ボタン表示

### タイマー終了（カウントダウンが0）

終了ダイアログを表示:

| ボタン | タスク状態 | 作業時間 | 遷移先 |
|---|---|---|---|
| 完了する (primary) | 完了 | カレンダーに記録 | ホーム |
| もう少し続ける (secondary) | 作業中のまま | — | タイマーリスタート |
| 作業を中断する (outlined) | 作業中のまま | カレンダーに記録 | ホーム |

### 復帰ダイアログ

ブラウザ閉じ後に未完了セッションがある場合、アプリ起動時に表示:
- 「前回の作業どうしますか？」
- 完了 / 中断 の2択

## インタラクション

| 操作 | 動作 |
|---|---|
| 「完了する」 | タスクを完了、カレンダーに記録、ホームに遷移 |
| 「中断する」 | タスクは作業中のまま、カレンダーに記録、ホームに遷移 |
| タイマー終了「もう少し続ける」 | 同じ時間でタイマーリスタート |
| TabBar で他画面遷移 | タイマーはバックグラウンドで継続 |

## データ要件

- 作業中タスクの情報（名前、カテゴリ、見積もり時間）
- タイマーセッション情報（タスクID、開始時刻 → localStorage に保存）
- タイマー時間: 見積もり時間あり → その時間、なし → 1時間

## デザイン参照（pencil nodeId）

| 画面 | nodeId |
|---|---|
| Mobile - Timer | `0ckmB` |
| Mobile - Timer End Dialog | `32se6` |
| Mobile - Recovery Dialog | `1bbFO` |
